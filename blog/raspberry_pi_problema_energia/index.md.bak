# Evitando problemas de energia com o seu Raspberry Pi

Outline:

 - How when using USB peripherals in with "older" Pis you may run into the problem of the whole thing shutting down due to overconsumption of power when plugging/unplugging things
 - Solutions may include: 
   - using externally powered USB devices
   - getting a PSU that generates more current
   - using the official Raspberry Pi Foundation PSUs.

Parte da popularidade do Raspberry Pi na cena dos [Single Board Computers](!LINK Pi SBC Free Software) certamente provém do fato que seus periféricos e demais interfaces podem ser atendidos por dispositivos de computadores disponíveis comumente nas casas e escritórios atuais. É possível ligá-lo no próprio carregador de celular e conectar periféricos através de USB como um próprio [Computador Desktop](!LINK rpi desktop), tornando seu uso muito mais flexível e natural. Porém, mesmo com o Raspberry Pi aderindo a certos padrões, quando se trata de *energia* é preciso uma atenção especial para escolher uma fonte adequada para que todas as operações de computação sejam executadas de forma adequada sem danificar o equipamento por conta de uma voltagem ou amperagem inadequada. 

Embora fontes comuns de celular possam confortavelmente manter os modelos antigos do Raspberry Pi operando sem acessórios, esta situação muda com os modelos mais novos, que consomem mais energia para funcionar, ou quando plugamos periféricos que aumentam o consumo de energia do dispositivo. Ao passo que o consumo de energia é um ponto frequentemente ignorado pela maior parte dos usuários de computadores, no caso do Raspberry Pi a energia disponível é pouca e acontada, o que pode causar alguns problemas inesperados se não tomada a atenção. Neste post, veremos porque alguns problemas de energia podem ocorrer em certos casos com o Raspberry Pi, e como podemos evitar que aconteçam.

## Requerimentos mínimos vs recomendados de energia do Raspberry Pi

Todos os modelos do Raspberry Pi até a versão 3 foram pensados sob a ótica de compatibilidade com fontes comuns DC utilizadas por smartphones, padronizadas há muito tempo na voltagem 5V. Desta forma, até as velhas fontes daquele tocador de MP3 que você tinha desde 2003 são suficientes para alimentar um Raspberry Pi até o modelo 3 por si só. 

A partir do modelo 2, porém, o design do Raspberry começou a incorporar mais capacidade de computação e memória, o que começou a aumentar de forma significante o consumo de energia do design original. A compatibilidade da voltagem com fontes padrão de smartphone fora mantida, porém, e na ausência de qualquer outro periférico os modelos 2 e 3 ainda podem ser mantidos ligados.

A partir do modelo 4, o Raspberry Pi teve um salto significante de recursos, e seus requerimentos de energia se tornaram maiores do que o padrão de 5V das fontes de smartphone comuns. Ele passou a requerer sua própria fonte para operar de maneira correta, surpreendendo muitos acostumados com os modelos anteriores. 

A verdade, porém, é que desde o modelo 2, já era de conhecimento que uma fonte comum não poderia garantir *todas* as operações com o Raspberry Pi, especialmente quando combinadas com periféricos de USB. Prova disto é que a Raspberry Pi Foundation sempre manteve publicado ambos os [requerimentos *mínimos* e *recomendados* de energia]https://www.raspberrypi.org/documentation/faqs/#pi-power-specs) para cada modelo do Raspberry Pi. Portanto, ao passo que estes modelos acabam funcionando com uma fonte qualquer, isto não significa que eles garantem a operação em todos os casos.

Segundo a documentação da Raspberry Pi Foundation, os modelos do Raspberry Pi em geral possuem os seguintes valores de Voltagem e Amperagem *recomendados* para operar:

 - Model B: 5V / 1.2A
 - Model 2 a 3: 5V / 1.8A
 - Model 4: **5.1V** / 3A.

Para comparação, uma fonte de smartphone genérica consegue providenciar 5V a 0.7A apenas, o que é bem abaixo da capacidade recomendada para operações dos modelos 3 e anteriores, e insuficiente para o modelo 4 em diante. Se você trabalha apenas com o Raspberry Pi como um [servidor via acesso remoto](!LINK ssh), pode não encontrar problemas com energia numa fonte comum, mas ao plugar algum periférico como um teclado, pode se surpreender se o sistema inteiro sofrer um reboot por conta do pico de consumo de energia.

## Soluções par evitar problemas de energia na operação do Raspberry Pi

Se você está frustrado com a dificuldade de utilizar periféricos ou a capacidade total do seu Raspberry Pi via por conta de problemas de energia, há algumas soluções diferentes que você pode considerar: trocar a fonte ou a alimentação dos seus periféricos.

### Fontes com maior amperagem

Ao passo que hoje temos uma vasta disponibilidade de fontes para smartphones com "modo rápido" de carregamento, a verdade é que a maioria ainda segue o mesmo padrão 5V/0.7A decidido há quase duas décadas. Até mesmo as fontes "rápidas" operam em dois modos distintos, sendo o 5B/0.7A o *fallback* caso o dispositivo não suporte voltagens e amperagens maiores. E enquanto a voltagem da maioria das fontes é padronizada nos 5V, a amperagem pode variar significantemente - para cima ou para baixo.

Ao invés de "catar milho" buscando na gaveta uma fonte de celular apropriada, é muito mais eficiente procurar exatamente por uma fonte que atenda os requerimentos de energia recomendados do seu Raspbery Pi. E felizmente, [fontes que fornecem 5V/1.2A existem](!LINK affiliate) e caem como uma luva nos requerimentos da maior parte dos Raspberry Pis descritos acima.

Uma fonte com capacidade de amperagem mais alta é capaz de fornecer corrente elétrica adicional para quando o Raspberry Pi recebe um dispositivo USB conectado, não causando o reboot por falta de energia, e pode garantir o funcionamento no caso do uso de outros periféricos também.

### Dispositivos e Hubs USB com fonte própria

### Fontes oficiais do Raspberry Pi Foundation

## Conclusão

---

**Disclaimer:** o Raspberry Pi Brasil não é um órgão oficial da Raspberry Pi Foundation e não possui a documentação oficial referente às especificações de energia e de hardware do Raspberry Pi. Consulte a documentação oficial da [Raspberry Pi Foundation](https://raspberrypi.org) no caso de dúvida. O Raspberry Pi Brasil não se responsabiliza em caso de danos oriundos da utilização de qualquer informação deste site.


----

Sources:

https://www.raspberrypi.org/documentation/hardware/raspberrypi/power/README.md

General FAQ: https://www.raspberrypi.org/documentation/faqs/#pi-power-specs